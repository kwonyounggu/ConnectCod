(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{220:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=d(n(1)),i=n(239),s=d(n(967)),u=n(84),l=n(0),c=n(92),f=n(85);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return console.log("INFO (constructor() of login.jsx"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"render",value:function(){return console.log("----INFO (render() of login.jsx) is called------"),a.default.createElement(i.Grid,null,a.default.createElement(i.Row,null,a.default.createElement(i.Col,{md:4,mdOffset:4},this.props.auth.isAuthenticated?a.default.createElement(i.Alert,{bsStyle:"danger"},a.default.createElement("h4",null,"Ooops! You forgot to logout first, please try again after.")):a.default.createElement(s.default,o({loginRequest:this.props.loginRequest,addAlertMessage:this.props.addAlertMessage,setCurrentUser:this.props.setCurrentUser},this.props.location)))))}}]),t}();p.propTypes={loginRequest:l.PropTypes.func.isRequired,addAlertMessage:l.PropTypes.func.isRequired,setCurrentUser:l.PropTypes.func.isRequired,auth:l.PropTypes.object.isRequired},t.default=(0,u.connect)(function(e){return{auth:e.authReducer}},{loginRequest:c.loginRequest,addAlertMessage:f.addAlertMessage,setCurrentUser:c.setCurrentUser})(p)},259:function(e,t,n){"use strict";var o=n(263),r=n(30);function a(e,t){return t.encode?t.strict?o(e):encodeURIComponent(e):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,o){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===o[e]&&(o[e]={}),o[e][t[1]]=n):o[e]=n};case"bracket":return function(e,n,o){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==o[e]?o[e]=[].concat(o[e],n):o[e]=[n]:o[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=r({arrayFormat:"none"},t)),o=Object.create(null);return"string"!=typeof e?o:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),r=t.shift(),a=t.length>0?t.join("="):void 0;a=void 0===a?null:decodeURIComponent(a),n(decodeURIComponent(r),a,o)}),Object.keys(o).sort().reduce(function(e,t){var n=o[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort(function(e,t){return Number(e)-Number(t)}).map(function(e){return t[e]}):t}(n):e[t]=n,e},Object.create(null))):o},t.stringify=function(e,t){var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,o){return null===n?[a(t,e),"[",o,"]"].join(""):[a(t,e),"[",a(o,e),"]=",a(n,e)].join("")};case"bracket":return function(t,n){return null===n?a(t,e):[a(t,e),"[]=",a(n,e)].join("")};default:return function(t,n){return null===n?a(t,e):[a(t,e),"=",a(n,e)].join("")}}}(t=r({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map(function(o){var r=e[o];if(void 0===r)return"";if(null===r)return a(o,t);if(Array.isArray(r)){var i=[];return r.slice().forEach(function(e){void 0!==e&&i.push(n(o,e,i.length))}),i.join("&")}return a(o,t)+"="+a(r,t)}).filter(function(e){return e.length>0}).join("&"):""}},263:function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),a=n(239);t.default=function(e){var t=e.id,n=e.label,i=e.help,s=e.checkUserExists,u=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["id","label","help","checkUserExists"]);return r.default.createElement(a.FormGroup,{controlId:t,validationState:i?"error":null},r.default.createElement(a.ControlLabel,null,n),r.default.createElement(a.FormControl,o({onBlur:s},u)),i&&r.default.createElement(a.HelpBlock,null,i))}},967:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=h(n(1)),a=n(83),i=n(239),s=h(n(968)),u=n(51),l=n(0),c=h(n(274)),f=h(n(47)),d=h(n(259)),p=h(n(969));function h(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o=d.default.parse(e.search);return n.state={email:o.email?o.email:"",password:"",errors:{},isLoading:!1,invalid:!1},n.onChange=n.onChange.bind(n),n.onSubmit=n.onSubmit.bind(n),n.isValid=n.isValid.bind(n),n.facebookResponse=n.facebookResponse.bind(n),n.facebookClick=n.facebookClick.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),o(t,[{key:"facebookResponse",value:function(e){var t=this;if(console.log("facebookResponse:",e),null!=e.email&&null!=e.id&&null!=e.name){var n={snsProvider:"FACEBOOK",snsId:e.id,name:e.name,email:e.email,errors:{}};this.props.loginRequest(n).then(function(e){console.log("successful SNS Login, the response object=",e),e.data.invalid?t.setState({errors:e.data.errors,isLoading:!1}):((0,u.setAuthorizationToken)(e.data.token),t.props.setCurrentUser((0,f.default)(e.data.token)),t.props.addAlertMessage({type:"success",text:"You logged in successfully. Welcome!"}),t.context.router.history.push("/"))}).catch(function(e){console.log("ERROR: ",e),t.setState({isLoading:!1,errors:{serverAPI:e+":::"}})})}else this.setState({isLoading:!1})}},{key:"facebookClick",value:function(e){console.log("facebookClick: ",e),this.setState({errors:{},isLoading:!0})}},{key:"onChange",value:function(e){this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e.target.name,e.target.value))}},{key:"isValid",value:function(){var e=(0,s.default)(this.state),t=e.errors,n=e.isValid;return n||this.setState({errors:t}),n}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),console.log("---INFO (onSubmit() of loginForm.jsx) is called---, ",this.state),this.isValid()&&(this.setState({errors:{},isLoading:!0}),this.props.loginRequest(this.state).then(function(e){console.log("successful, the response object=",e),e.data.invalid?t.setState({errors:e.data.errors,isLoading:!1}):((0,u.setAuthorizationToken)(e.data.token),t.props.setCurrentUser((0,f.default)(e.data.token)),t.props.addAlertMessage({type:"success",text:"You logged in successfully. Welcome!"}),t.context.router.history.push("/"))}).catch(function(e){console.log("ERROR: ",e),t.setState({isLoading:!1,errors:{serverAPI:e+":::"}})}))}},{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement(i.Form,{onSubmit:this.onSubmit},r.default.createElement("h1",null,"Login"),this.state.errors.serverAPI&&r.default.createElement(i.Alert,{bsStyle:"danger"},r.default.createElement("h4",null,this.state.errors.serverAPI.split(":::")[0]),r.default.createElement("h6",null,this.state.errors.serverAPI.split(":::")[1])),r.default.createElement("h4",null,"Login with your social media account or email address"),r.default.createElement(c.default,{id:"email",type:"email",label:"Email",value:this.state.email,name:"email",placeholder:"example@example.com",onChange:this.onChange,help:this.state.errors.email}),r.default.createElement(c.default,{id:"password",type:"password",label:"Password",value:this.state.password,name:"password",placeholder:"Enter your password",onChange:this.onChange,help:this.state.errors.password}),r.default.createElement(i.FormGroup,null,r.default.createElement(i.Button,{disabled:this.state.isLoading,type:"submit"},"Login")),r.default.createElement(i.FormGroup,null,r.default.createElement(a.Link,{to:"/signup"},"Signup Now")," | ",r.default.createElement(a.Link,{to:"/forgotPassword"},"Forgot password?"))),r.default.createElement("div",null,r.default.createElement(p.default,{appId:"1320010824683214",autoLoad:!1,reAuthenticate:!1,textButton:"Login With Facebook",fields:"name,email,picture",callback:this.facebookResponse,onClick:this.facebookClick,icon:"fa-facebook"})))}}]),t}();b.propTypes={loginRequest:l.PropTypes.func.isRequired,addAlertMessage:l.PropTypes.func.isRequired,setCurrentUser:l.PropTypes.func.isRequired},b.contextTypes={router:l.PropTypes.object.isRequired},t.default=b},968:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};o.default.isEmpty(e.email)?t.email="This field is required.":o.default.isEmail(e.email)||(t.email="Email is invalid.");o.default.isEmpty(e.password)?t.password="This field is required.":o.default.isByteLength(e.password,{min:2,max:30})||(t.password="This field length requires between 2 and 30.");return{errors:t,isValid:(0,r.default)(t)}};var o=a(n(301)),r=(a(n(407)),a(n(86)));function a(e){return e&&e.__esModule?e:{default:e}}},969:function(e,t,n){e.exports=function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(2)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(11),u=o(s),l=n(9),c=o(l),f=n(4),d=o(f),p=n(3),h=o(p),b=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),u=0;u<i;u++)s[u]=arguments[u];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),o.state={isSdkLoaded:!1,isProcessing:!1},o.responseApi=function(e){window.FB.api("/me",{locale:o.props.language,fields:o.props.fields},function(t){a(t,e),o.props.callback(t)})},o.checkLoginState=function(e){o.setStateIfMounted({isProcessing:!1}),e.authResponse?o.responseApi(e.authResponse):o.props.onFailure?o.props.onFailure({status:e.status}):o.props.callback({status:e.status})},o.checkLoginAfterRefresh=function(e){"connected"===e.status?o.checkLoginState(e):window.FB.login(function(e){return o.checkLoginState(e)},!0)},o.click=function(e){if(o.state.isSdkLoaded&&!o.state.isProcessing&&!o.props.isDisabled){o.setState({isProcessing:!0});var t=o.props,n=t.scope,r=t.appId,a=t.onClick,i=t.reAuthenticate,s=t.returnScopes,u=t.redirectUri,l=t.disableMobileRedirect;if("function"!=typeof a||(a(e),!e.defaultPrevented)){var c={client_id:r,redirect_uri:u,state:"facebookdirect",return_scopes:s,scope:n};i&&(c.auth_type="reauthenticate"),o.props.isMobile&&!l?window.location.href="//www.facebook.com/dialog/oauth"+(0,h.default)(c):window.FB.login(o.checkLoginState,{scope:n,return_scopes:s,auth_type:c.auth_type})}}},r(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){if(this._isMounted=!0,document.getElementById("facebook-jssdk"))this.sdkLoaded();else{this.setFbAsyncInit(),this.loadSdkAsynchronously();var e=document.getElementById("fb-root");e||((e=document.createElement("div")).id="fb-root",document.body.appendChild(e))}}},{key:"componentWillReceiveProps",value:function(e){this.state.isSdkLoaded&&e.autoLoad&&!this.props.autoLoad&&window.FB.getLoginStatus(this.checkLoginAfterRefresh)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"setStateIfMounted",value:function(e){this._isMounted&&this.setState(e)}},{key:"setFbAsyncInit",value:function(){var e=this,t=this.props,n=t.appId,o=t.xfbml,r=t.cookie,a=t.version,i=t.autoLoad;window.fbAsyncInit=function(){window.FB.init({version:"v"+a,appId:n,xfbml:o,cookie:r}),e.setStateIfMounted({isSdkLoaded:!0}),(i||window.location.search.includes("facebookdirect"))&&window.FB.getLoginStatus(e.checkLoginAfterRefresh)}}},{key:"sdkLoaded",value:function(){this.setState({isSdkLoaded:!0})}},{key:"loadSdkAsynchronously",value:function(){var e=this.props.language;!function(t,n,o){var r=t.getElementsByTagName(n)[0],a=r,i=r;t.getElementById(o)||((i=t.createElement(n)).id=o,i.src="https://connect.facebook.net/"+e+"/sdk.js",a.parentNode.insertBefore(i,a))}(document,"script","facebook-jssdk")}},{key:"style",value:function(){var e=this.constructor.defaultProps.cssClass;return this.props.cssClass===e&&u.default.createElement("style",{dangerouslySetInnerHTML:{__html:d.default}})}},{key:"containerStyle",value:function(){var e={transition:"opacity 0.5s"};return(this.state.isProcessing||!this.state.isSdkLoaded||this.props.isDisabled)&&(e.opacity=.6),a(e,this.props.containerStyle)}},{key:"renderOwnButton",value:function(){var e=this.props,t=e.cssClass,n=e.size,o=e.icon,r=e.textButton,i=e.typeButton,s=e.buttonStyle,l="string"==typeof o,c={};return this.props.isDisabled&&function(e){return["button","input","select","textarea","optgroup","option","fieldset"].indexOf((e+"").toLowerCase())>=0}(this.props.tag)&&(c.disabled=!0),u.default.createElement("span",{style:this.containerStyle()},l&&u.default.createElement("link",{rel:"stylesheet",href:"//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"}),u.default.createElement(this.props.tag,a({type:i,className:t+" "+n,style:s,onClick:this.click},c),o&&l&&u.default.createElement("i",{className:"fa "+o}),o&&!l&&o,r),this.style())}},{key:"render",value:function(){var e=this.props.children;return e?u.default.createElement("span",{onClick:this.click},e):this.renderOwnButton()}}]),t}(u.default.Component);b.propTypes={isDisabled:c.default.bool,callback:c.default.func.isRequired,appId:c.default.string.isRequired,xfbml:c.default.bool,cookie:c.default.bool,reAuthenticate:c.default.bool,scope:c.default.string,returnScopes:c.default.bool,redirectUri:c.default.string,textButton:c.default.string,typeButton:c.default.string,autoLoad:c.default.bool,disableMobileRedirect:c.default.bool,isMobile:c.default.bool,size:c.default.string,fields:c.default.string,cssClass:c.default.string,version:c.default.string,icon:c.default.any,language:c.default.string,onClick:c.default.func,containerStyle:c.default.object,buttonStyle:c.default.object,children:c.default.node,tag:c.default.oneOfType([c.default.node,c.default.func]),onFailure:c.default.func},b.defaultProps={textButton:"Login with Facebook",typeButton:"button",redirectUri:"undefined"!=typeof window?window.location.href:"/",scope:"public_profile,email",returnScopes:!1,xfbml:!1,cookie:!1,reAuthenticate:!1,size:"metro",fields:"name",cssClass:"kep-login-facebook",version:"2.3",language:"en_US",disableMobileRedirect:!1,isMobile:function(){var e=!1;try{e=!!(window.navigator&&window.navigator.standalone||navigator.userAgent.match("CriOS")||navigator.userAgent.match(/mobile/i))}catch(e){}return e}(),tag:"button",onFailure:null},t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),r=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=r.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}},function(e,t,n){(t=e.exports=n(5)()).push([e.id,".kep-login-facebook{font-family:Helvetica,sans-serif;font-weight:700;-webkit-font-smoothing:antialiased;color:#fff;cursor:pointer;display:inline-block;font-size:calc(.27548vw + 12.71074px);text-decoration:none;text-transform:uppercase;transition:background-color .3s,border-color .3s;background-color:#4c69ba;border:calc(.06887vw + .67769px) solid #4c69ba;padding:calc(.34435vw + 13.38843px) calc(.34435vw + 18.38843px)}.kep-login-facebook.small{padding:calc(.34435vw + 3.38843px) calc(.34435vw + 8.38843px)}.kep-login-facebook.medium{padding:calc(.34435vw + 8.38843px) calc(.34435vw + 13.38843px)}.kep-login-facebook.metro{border-radius:0}.kep-login-facebook .fa{margin-right:calc(.34435vw + 3.38843px)}",""]),t.locals={"kep-login-facebook":"kep-login-facebook",small:"small",medium:"medium",metro:"metro",fa:"fa"}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(o[a]=!0)}for(r=0;r<t.length;r++){var i=t[r];"number"==typeof i[0]&&o[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),e.push(i))}},e}},function(e,t){"use strict";function n(e){return function(){return e}}var o=function(){};o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){"use strict";var o=function(e){};e.exports=function(e,t,n,r,a,i,s,u){if(o(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,i,s,u],f=0;(l=new Error(t.replace(/%s/g,function(){return c[f++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,n){"use strict";var o=n(6),r=n(7),a=n(10);e.exports=function(){function e(e,t,n,o,i,s){s!==a&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=o,n.PropTypes=n,n}},function(e,t,n){e.exports=n(8)()},function(e,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,n){t.exports=e}])}(n(1))}}]);